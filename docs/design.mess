# Kandria Design Document
This document should serve as an overview for the design goals of Kandria. It is not meant as a strict rule or goal document, but rather as an inspiration and general guideline.

Kandria is a hybrid of a side-scrolling platformer and a hack and slash action rpg. It is heavy on story and exploration, and features a post-apocalyptic sci-fi setting.

## Characters
Kandria features a cast of main characters, as well as several factions that are relevant to the story. The protagonist the player plays as is called 'the stranger'; one of very few remaining androids from the old world. The main cast otherwise consists of Fi, Jack, Catherine, and Alex.

All of the main cast is part of a faction of people trying to lead a peaceful cooperative existence on the surface world. Other factions exist, mostly dwelling underground, many of them either isolationist, or aggressive.

[ image https://studio.tymoon.eu/api/studio/file?id=1762 ]

Please see the dedicated "characters"(link characters.mess) document for more information

## Story
The story takes place in a post apocalyptic world, ruined and almost entirely destroyed by an unknown calamity. A vast tunnel network spans underground, filled with old world remnants, dangerous machinery, and feral animals. Several factions have established camps in larger underground caverns to take refuge from the dry heat above ground. Survival is harsh, as old-world tech is rare and often broken, the areas outside the camps are dangerous, and there is little in the way of economic stability. Some factions even struggle to get enough food to survive due to it being difficult to grow anything underground.

### Themes
Central themes of the story are ethics, humanity, and survival in a ruined world. The story is set between beats of drama and peace, with a final act that amps up the tension and conflict. Ethics and humanity are primarily explored via interactions with The Stranger and how characters deal with her being an android.

### Setting
The story is set in the future. An unknown calamity has wiped almost all civilisation off the face of the earth, and transformed most of the surface into dry desert. Most of the remaining life is underground, in vast tunnel and cave systems that were dug prior to the calamity. With most of the upper class gone, resources on how to build and maintain infrastructure and machinery are very scarce. Most of the existing machines people make use of were lucky finds that happened to still work, or didn't require expertise to get working again. As such, the world has stepped back from a very high-tech, advanced civilisation back to a more primitive state.

For now, deep underground machinery still manages to pump water and electricity upwards to some regions of the tunnels. Camps were set up around these regions, and are defended viciously. Most did not attempt to return to the surface, as only ruins remained. The lack of water access combined with the intense heat and desertification made it a very difficult spot to live.

However, survival inside the tunnels isn't easy either, as animals and broken robots have invaded them and taken them for their homes as well. Many of the tunnels and rooms have also collapsed, and there is no accurate mapping of the area readily available either. This means that outside of faction territory, the tunnels are hazardous and difficult to navigate. The lack of sunlight and proper ventilation only adds to the problem.

The most contended resources are food sources and functioning old-world technology or research. One extremist faction in specific attempts to gather as much old-world tech as possible to augment themselves with and turn themselves into super-humans.

The faction the player spends the most time with is a small settlement above ground that have found a set of mostly intact ruins among the rubble of a former city. They manually set up water piping from underground and have started an agriculture farm to stay self-sufficient on food. This places them in a much more independent position, and allows them to stay away from most of the dangers of the underground tunnel system.

### Progression
The game opens with Catherine finding The Stranger buried under rubble somewhere deep underground. Catherine decides to fumble around and manages to reactivate The Stranger. The stranger is then led through a tutorial area back up to the camp, where the rest of the main cast is introduced.

Please see the dedicated "plot outline"(link plot outline.mess) document for information on the game's plot.

### Locations
Major locations as well as general lore information is detailed in the "lore document"(link lore.mess).

## Gameplay
Overall the game follows fairly standard ARGP mechanics, with the twist addition of platformer challenges for exploration segments.

### Goals
Long term goals: learn about the world, figure out the story, collect all fish and lore pieces.

Short term goals: overcome platforming challenge, defeat enemies, scavenge for items, find clues, read dialogue.

### Player Skills
The player must be able to perform precision platforming manoeuvres, manage combat via attack combos, well timed evasions, and general enemy mob management. There is no item based progression, so the player must be able to learn and improve their platforming and combat skills as the game goes on. The primary input method will be a standard gamepad, so the user must be familiar with that and must be able to perform simultaneous inputs.

### Mechanics
Since the game is a mash-up, the mechanics will be described in two separate sections. There is overlap between the two, though the focus on utilising a shared mechanic will be very different, so describing them separately still makes sense.

#### Platforming
The platforming in the game will follow standard 2D fare, though with two exceptions: a ground and aerial directional dash allows the player to extend their jump distance and increases the general agility in air, and straight walls can be climbed.

Jumps come in two fashions, a short hop and a long-press high jump. The jump will still not provide a lot of air, as the dash fills that purpose. The player can also jump from walls, which allows rapid movement in tight vertical corridors.

The dash is single-use and requires the player to land on the ground to recharge. The current dash status is indicated clearly visible to avoid confusing the player. The dash can be extended by holding the button for longer, but will have diminishing speed and reach the longer it goes on. The dash speed is the highest in the beginning, and skilled timing of the dash can be used to reach farther places than using the full dash length.

Climbing has a strength limit, though it has to be generous enough to allow the player to linger at times and plan their move without feeling stressed. The climb limit resets once landing on the ground, just like the dash. This limits the total vertical movement.

When climbing using the jump will simply jump straight up, at the cost of more climbing stamina. This means the player can speed up certain climbing sections as long as they are sure that they can make the distance. Jump climbing allows strictly less reach than climbing normally.

Platforming challenges will consist primarily of manoeuvring in air to land precise jumps, and to get the timing correct when falling or destructible platforms are involved.

Hazards such as spikes or dangerous chemicals can provide impassable obstacles, and when hit reset the player to the last known 'safe spot', designated by the designer of the level. Hitting a platforming hazard does not decrease health, as having to redo the challenge is punishment enough on its own, and resetting to an earlier save would only lead the player to save excessively or lose too much progress.

Additional mechanics might need to be introduced to make the platforming more challenging later and introduce a puzzle-like element as is present in Celeste. Ideas for such mechanics would be springs, sticky surfaces, vertical and horizontal lifts.

It might also be interesting to combine platforming with enemies, though this might be too difficult to achieve without frustrating the player or limiting enemy movement too severely.

The level design will definitely need clear separation between puzzle/platforming, exploration, and combat sections in order to properly account for every aspect of the game. Later stages might get the different areas closer together to increase difficulty.

A chase mechanic might also be useful to contextualise story beats in gameplay, and allow the player to experience a previous area in a new way. More difficult stages could then also combine the chase with an unknown area to create a time pressure element.

The player movement //must// be fun on its own, as this is what the player will spend the majority of their time doing even when there is no particular challenge involved.

#### Combat
The player has a close-range sword that allows them to use a set of heavy and light attacks on the ground, and an additional set of attacks in the air. The player is also given additional dodges that make them impervious, but only trigger when the player hits the dash button in the correct timing before being hit.

Attacks are chosen by a button deciding on the attack form (heavy or light), the current placement of the player (ground or air), and an optional direction. The following distinct attacks are planned:

- light ground side*
- heavy ground side*
- light ground up (shoots enemy behind to clear areas)
- heavy ground up (shoots enemy up for juggling)
- light ground down (quick slash with stun)
- heavy ground down (long slash with heavy stun, burying enemy for a bit)
- light ground charge (spin attack with repeated damage)
- heavy ground charge (heavy attack that shoots enemy back fast)
- light aerial side*
- heavy aerial side*
- light aerial down (coasts over ground enemy for attack)
- heavy aerial down (zips down to ground quickly, stunning and shooting enemy back)
- light counter
- heavy counter

The attacks marked with an asterisk can be chained, meaning that inputting the attack multiple times will transition the attack into a secondary and third form. After the third form a brief timeout prevents further chaining. If not chained, each of the three variants must have its own stop animation that returns the player to neutral state.

Attack inputs are buffered so that the player doesn't have to hit precise timings to execute chains. The main challenge lies in avoiding damage by knowing the timing of attacks and when to dodge.

Each attack animation has its own timings for when the player can cancel, can be interrupted, can be damaged, and how much damage is dealt to a hit enemy. Each animation also has its own movement mechanics that move the player or hit enemies. To this end light attacks do not move the player much and generally have a very short wind-up time and fast execution time. Heavy attacks may have long execution times and may move the player a large deal. For chained animations, each subsequent animation is longer than the last, and may move the player farther than before.

The attacks must be fluid and pleasant to look at. They have to be fun to execute and the movement has to flow smoothly between normal platforming movement and the more canned movement of the attack animations. It is //vital// that the player have fun executing the attacks on their own. Most of the fun comes from being able to execute flawless attack chains and dodges that allow you to destroy enemies fast and in a spectacular manner.

Since ground movement can be very fast, and the player could encounter enemies at any moment, transitioning between normal movement and an attack has to look natural.

The player and every enemy has a health bar that is decreased when they get hit. When zero, the entity will cause them to play a death animation.

Each of these enemy types in the game must have a very distinct and clearly recognisable look and animation set to allow the player to quickly recognise them and make decisions. Enemy animations always include long wind-up times to clearly choreograph their actions. Too short of a wind-up would make the attack appear too sudden and not let the player react in time. To further aid recognition, each type of attack has a unique sound byte and is marked by a clearly visible effect such as their eyes flaring up.

Difficulty in the combat arises from different amounts and different combinations of the enemy types. Occasionally different variants (scaled up, powered up) could also be employed to add some additional variety to the combat and to increase challenge.

Enemy AI has to be smart enough to deal with some platforming obstacles, but not able to traverse everything the player can, in order to allow the player to still get away if they feel cornered.

The level design needs to take combat arenas into account, as enemy AI patterns and player attacks can only deal with certain types of terrain. Introducing too many slopes or too many pits or small holes can severely hamper things and disrupt the combat flow, leading to frustration.

When defeated enemies can drop items. These items may, rarely, be health, damage-up, or defence-up items, but usually are nondescript scrap parts that can be exchanged for other items, or used for quests at the colony. The player is able to use restorative/support items from a quick menu during battle, which while open causes time to slow down to allow the player more time to select the appropriate item without having to worry about safety.

#### Quests
Quests are initiated by talking to the correct NPC. Generally each quest can either be relevant to the main story line, or be side content that expands on the quest giver's character or the world lore. Each quest is in the form of one or more tasks, that can either be:

1. Talk to a character
2. Go to a location
3. Find a specific item
4. Defeat enemies in a location

Naturally the tasks are explained away in a more natural manner in the dialogue to make it appear less bland and give the player a proper reason to perform the task.

Rewards for completing a quest are additional dialogue, lore, and occasionally items.

Multiple quests can be in flight at the same time, though some quests will fail if the story advances too far and causes a change that makes the quest impossible to complete. Whether a quest is available depends on the set of completed quests, the locations the player has discovered, and the people the player has talked to.

Currently active quests, including hints on what to do, are listed in a separate logbook menu that the player can access whenever they aren't in combat. The logbook also tracks completed quests, items, and player stats.

The quest system is also flexible enough to facilitate cutscenes (sequences without player input). This is occasionally necessary in order to deliver a satisfying drama and further visualise scenes beyond the dialogue textbox.

#### Dialogue
Dialogue comes in the form of a standard RPG textbox, with detailed character profiles appearing above the box, showing the current speaker. The profiles will have animations and variants to fit the character's current expression.

Occasionally the player can be offered with a choice between multiple dialogue responses. The responses to choose from must be clearly visible and unabbreviated so that it is clear to the player what The Stranger is going to say. These choices will not have a branching effect on the story, but may be referenced by character dialogue later.

Text can be customised to dynamically reflect player actions, such as making characters react differently depending on current player health, performance, quest completion count, past choices, etc.

Dialogue is played out as a series of text blocks that automatically scroll out, though the player can prompt the text box to complete immediately to skip through dialogue quickly. During scrolling, various effects can be applied, such as screen shake, changing the expression of the character profile, playing a sound effect, etc.

[ image https://filebox.tymoon.eu//file/TWpBMU5nPT0= ]

#### Fishing
At various spots throughout the world the player is offered a fishing minigame. In this game they need to cast out a fishing line. Once cast, the line will rhythmically bob up and down until randomly a fish catches on. When caught, the fish will cause a big splash. The player must then reel the line in within a short time frame to retrieve the fish, or it will escape again.

Caught fish are added as items that can be sold, and each unique fish fills a spot in a fishing encyclopedia, rewarding completionism. Each fish type has a different rarity with each fishing location, encouraging players to fish at various spots.

#### Misc
Depending on the number of areas there's going to be, a fast travel system has to be considered. The system would consist of an underground metro line. New areas need to be connected to the metro network by opening structural safety doors that were automatically dropped in the calamity. In order to open these doors the next metro station needs to be reached first, meaning the player cannot travel to an unknown location without discovering it first.

### Progression
Progression in the game can be achieved in various ways that the player can pick for themselves.

1. Increasing experience and levelling.
   This is achieved by fighting or exploring and drives people to explore further, as higher levels trivialise starting enemies, and make harder encounters easier.
2. Completing quests and advancing the plot.
   Quests also give other item rewards to the player.
3. Exploring the world and discovering lore.
   Lore pieces and collectable items are used as an incentive to reward exploration and deliver narrative in a nonlinear way.
4. Upgrading the sword with found items.
   This again feeds into combat and item gathering.
5. Fishing
   In order to fill in the fishing encyclopedia, players need to discover new fishing spots and use their skills to catch every type of fish. Fish can be sold for other items as well.

Each of these progression systems feed into or take from at least another system, rewarding players alternating between the various systems. This helps to avoid fatigue with the game, as well.

### Fail-States
There's two separately counted ways of failing in Kandria:

1. Platforming death. If the player falls into a pit or dies of spikes or other lethal objects, the player will die and respawn quickly in the same chunk they were currently in. This quick, unpunishing respawn is necessary to avoid players growing too frustrated at the platforming challenge.
2. Combat death. Should the player's health reach zero during combat, a "true death" screen will appear, which forces the player to reload from a previous save file. The player can save at any time by visiting a telephone. Limiting the possible save points in this way focuses the design and simplifies the testing effort.

Keeping the two failure states separate allows both of them to focus on their areas of design. Having to restart a platforming challenge from a far-away save point would be far too frustrating, and immediately respawning after losing health would be far too trivialising.

## Art Style
The game will be in a low-resolution pixel art style with static tilesets for the map, and intricate animations for characters and enemies. Lots of decorative elements will be necessary to make the map interesting to look at despite its low resolution. Dynamic lighting including shadows and parallax backgrounds allow for a strong atmosphere.

Most of the time for art assets will be spent making detail tiles and animations for the various characters and enemy types.

For a more detailed mood board for the art style, see the "art document"(link art.mess).

[ image https://filebox.tymoon.eu//file/TWpBek5nPT0= ]
[ image https://filebox.tymoon.eu//file/TVRreU13PT0= ]

## Music & Sound Design
We are using a sound system where distinct areas receive their own individual themes. Each of these themes comes in several variants, though not all themes must cover all variants:

- High / High Vocal
- Medium / Medium Vocal
- Quiet / Quiet Vocal
- Ambient / Ambient Vocal

The variants imply different intensity levels and can be chosen as appropriate for the story at the given time. For instance, when first entering a new area, an ambient or quiet version should be chosen. After a significant plot element has occurred, the version can transition to a medium or high variant to give the story proper impact.

The variants can also be used to implicitly communicate the current state of the area to the player.

Battle themes and boss music tracks are not faded in dynamically, but will occur at set story points to lend them proper gravity and impact.

In addition to the primary music tracks, each area will have an underlying atmosphere track that properly communicates the area's mood. When transitioning between areas, there must always be a chunk where only the atmospheric track is audible, to ensure that music tracks can seamlessly transition.

Sound-design wise we will employ a programmatic reverb effect in order to attune sound effects to their spatial surroundings. The reverb will adjust depending on the dimensions of the room the player is currently in. We will also make use of directional and positional sounds to give events a proper spatial appearance in sound.

Finally, we will use filter effects to adjust the music in menus and during cutscenes or dialogue.

## Technical Specs
The game will be developed for PC using the custom Trial engine. A future port to Switch would be great, though is currently completely in the air and would depend on a large enough success on PC first.

Being a 2D game the performance requirements have to be kept appropriately low. As such, sufficient optimisation needs to be performed later to make it run well on lower-end hardware.

## Finance
This section will briefly discuss finances. A more detailed financing plan will need to be put together separately.

### Funding
Primary funding will be private out of savings. Funding will be required to hire additional team members and commission art and music. Another application for a grant at ProHelvetia will be attempted in 2021, this time for the larger production grant.

A kickstarter could also be considered if enough progress can be made to show a substantial game, and enough attention can be garnered to ensure the kickstarter will be successful.

### Demographics
The game will target the 'hard core' demographic of late teens and upwards. The game handles mature topics that the player will need to understand, but it does not talk about sex and other topics in that area. Violence will be prominent, but in a less recognisable, cartoony way, which keep it in the Teens/PG13 rating area.

### Localisation
The game will be written in English, with possible localisation to German, French, Spanish, and Japanese. Localisation will be very late in the development, though has to be done before release provided the game garners enough attention from foreign communities to warrant the extra cost.

### Marketing
Marketing during the production will proceed primarily through an email marketing campaign with weekly development updates, and monthly public updates to get more people into the mailing list. Twitter, Steam, Discord, and RSS Feeds are used to announce public updates. The Discord server also allows people to directly interact with the development team. Occasionally short update videos are posted to YouTube to showcase a particular change.

Closer to release we'll have to consult a marketing firm to drive the necessary traffic and attention to the game.

### Sales and Market Research
Initially the game will be sold primarily through steam. For this it'll be important to have a good store page and trailer, which will most definitely require professional consultation.

The game will be put up for sale for 20$ initially. Projected sales according to similar titles in the same genres lies somewhere between 2'000-10'000 units.

Relevant titles as of 6.2021 on Steam only:
- **Olija**
  Release: 1.2021
  Reviews: ~270
  Sales: 0-20k
  Price: 15$
  Matching tags: hack & slash, platformer, 2D, pixel art
  Gauged relevance: high
- **Narita Boy**
  Release: 3.2021
  Reviews: ~250
  Sales: 0-20k
  Price: 25$
  Matching tags: hack & slash, platformer, 2D, pixel art
  Gauged relevance: high
- **Katana Zero**
  Release: 4.2019
  Reviews: ~26k
  Sales: 500k-1000k (1'300k)
  Price: 15$
  Matching tags: hack & slash, platformer, 2D, pixel art
  Gauged relevance: medium (one hit kill, no platforming)
- **Skul: The Hero Slayer**
  Release: 2.2020
  Reviews: ~7k
  Sales: 200k-500k (350k)
  Price: 17$
  Matching tags: hack & slash, platformer, 2D, pixel art
  Gauged relevance: medium (roguelite, no platforming)
- **Pixel Shinobi**
  Release: 8.2019
  Reviews: ~250
  Sales: 20k-50k (12k)
  Price: 11$
  Matching tags: hack & slash, platformer, 2D, pixel art
  Gauged relevance: high
- **3000th Duel**
  Release: 12.2019
  Reviews: ~270
  Sales: 0-20k (13k)
  Price: 15$
  Matching tags: hack & slash, platformer, 2D
  Gauged relevance: medium (no platforming, detailed art)
- **Eaestern Exorcist**
  Release: 8.2020
  Reviews: ~3k
  Sales: 200-500k (150k)
  Price: 17$
  Matching tags: hack & slash, 2D
  Gauged relevance: medium (no platforming, detailed art)
- **Kunai**
  Release: 2.2020
  Reviews: ~200
  Sales: 0-20k (10k)
  Price: 17$
  Matching tags: hack & slash, platformer, 2D, pixel art
  Gauged relevance: high
- **Mists of Noyah**
  Release: 5.2020
  Reviews: ~250
  Sales: 0-20k (12.k)
  Price: 20$
  Matching tags: hack & slash, platformer, 2D, pixel art
  Gauged relevance: medium (random worlds, no platforming)
- **ICEY**
  Release: 11.2016
  Reviews: ~19k
  Sales: 500k-1000k (950k)
  Price: 11$
  Matching tags: hack & slash, 2D, pixel art
  Gauged relevance: low (no platforming, detailed art, old)
- **Dead Cells**
  Release: 8.2018
  Reviews: ~52k
  Sales: 1000k-2000k (2'600k)
  Price: 28$
  Matching tags: hack $ slash, platformer, 2D, pixel art
  Gauged relevance: low (no platforming, metroidvania, roguelite)
- **Dust: An Elysian Tail**
  Release: 5.2013
  Reviews: ~12k
  Sales: 1000k-2000k (600k)
  Price: 15$
  Matching tags: hack & slash, platformer, 2D
  Gauged relevance: low (no platforming, detailed art, old)
- **Celeste**
  Release: 1.2018
  Reviews: ~24k
  Sales: 500k-1000k (1'200k)
  Price: 19$
  Matching tags: platformer, 2D, pixel art
  Gauged relevance: low (no hack & slash)
- **NieR:Automata**
  Release: 3.2017
  Reviews: ~52k
  Sales: 1000k-2000k (2'600k)
  Price: 47$
  Matching tags: hack & slash, RPG
  Gauged relevance: low (no platforming, 3D, AAA)

## Misc
### References
The following games are good points of reference:

- Celeste (art style, platforming)
- Nier:Automata (art style, environment, mood, combat)
- Dead Cells (art style, animation)
- Katana Zero (art style, animation)
- ICEY (animation, combat)
- Myst series (environmental storytelling)
- Death Stranding (environment, mood)

### Last Update
This document was last updated on August 2021.
